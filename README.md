# MFL-MPK_diag

Исходники для центрального блока (блок ЦБ-ТДИМ) Валиевской диагностики опрашивающий 4 блока релейнного шкафа (блок ЛП-ТДИМ)
*Коммит: "Версия, которую поставил на ст. Промышленная 25.06.19". - по факту поставлен на станции и работает*

**Функции прошивки блока ЦБ-ТДИМ**

        Поверяются 4 блока на линии.
        Адреса блоков ЛП-ТДИМ, которые опрашивает прошивка толи:  0 1 2 3, или 1 2 3 4 (Разработчик не помнит точно)
        Данные идут в 2-х кадрах для умв32, ответ на адрес для УМВ32 и на "адрес УМВ32 + 1". 


**Руководство адаптации по КТС УК:**

        Четыре блока ТДИМ выглядат как две УМВ32.
        По адресу, указаному на центральном блок (addr), отвечает УМВ32 содержащая информацию с ТДИМ с адресами 0 и 1
        По адресу, указаному на блоке +1 (addr+1), отвечает УМВ32 содержащая информацию с ТДИМ с адресами 2 и 3.
        Всего 64 дискретных входа с 4-х блоков ТДИМ: 
        1-й ТДИМ - первые 16 импульсов/входв с УМВ32 с указаным адресом, можно считать, что подключены к УМВ32-Х
        2-й ТДИМ - вторые 16 импульсов/входв с УМВ32 с указаным адресом, можно считать, что подключены к УМВ32-Х2
        3-й ТДИМ - первые 16 импульсов/входв с УМВ32 с адресом + 1, можно считать, что подключены к УМВ32-Х1
        4-й ТДИМ - вторые 16 импульсов/входв с УМВ32 с адресом + 1, можно считать, что подключены к УМВ32-Х2
